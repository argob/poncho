let calendar={TODAY:null,months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDayName:["Dom","Lun","Mar","Mie","Jue","Vie"],daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],container:null,template:null,options:{},render:function(t){_this=this,document.querySelectorAll(t.containerId+", .js-holidays").forEach(t=>t.innerHTML=""),this.TODAY=new Date(Date.UTC(t.calendarYear,0,1,3,0,0)),this.options=t,this.daysOfMonth=t.daysOfMonth||this.daysOfMonth,this.container=jQuery(this.options.containerId),this.template=jQuery(this.options.templateId),this.iteration_date=new Date(Date.UTC(this.TODAY.getFullYear(),this.TODAY.getMonth(),1,3,0,0)),this.renderCalendar(),this.options.markers.forEach(function(t){_this.markDates(t)}),this.daysLeft(),document.querySelectorAll(".js-holidays").forEach(t=>t.hasChildNodes()?null:t.remove())},renderCalendar:function(){_this=this;var a=new Date(Date.UTC(_this.TODAY.getFullYear(),_this.TODAY.getMonth(),1,3,0,0));this.template.hide(),this.months.forEach(function(t,e){monthId="m"+t,iMonth=_this.getTplClone(_this.template,monthId),_this.container.append(iMonth),a.setUTCMonth(e),_this.drawCalendarMonth(a,iMonth.attr("id"))})},drawCalendarMonth:function(t,e){var a=t.getUTCMonth(),n=t.getUTCDay(),o=t.getUTCFullYear(),i=t.getUTCDate(),s=this.daysOfMonth[a],r=(jQuery("#"+e).find("h2").first().text(this.months[a]),0);t.getUTCMonth()===a&&t.getUTCFullYear()===o&&(r=i),1===a&&(o%100!=0&&o%4==0||o%400==0)&&(s=29),this.renderMonth(e,this.getCalendarStart(n,i),s,r)},renderMonth:function(t,e,a,n){for(var o,i=1,s=e,r=jQuery("#"+t),l=this.drawCalendarRow(r),d=1;d<=a;d++)(o=l.find("td").eq(s)).text(d),d===n&&o.addClass("today"),0===(s=++s%7)&&d+1<=a&&(l=this.drawCalendarRow(r),i++);for(;i<6;)l=this.drawCalendarRow(r),i++},drawCalendarRow:function(t){for(var t=t.find("table").first(),e=jQuery("<tr/>"),a=0;a<7;a++)e.append(jQuery("<td/>").html("&nbsp;"));return t.append(e),e},getCalendarStart:function(t,e){e=(e-1)%7-t;return 0<e&&(e-=7),Math.abs(e)},getTplClone:function(t,e){return t.clone().attr("id",e).show()},markDates:function(t){_this=this;var e,a="",n=null;for(e in t){var o=t[e].date.split("/"),o=new Date(Date.UTC(o[2],o[1]-1,o[0],3,0,0)),i=_this.months[o.getMonth()],i=jQuery("#m"+i),s=o.getDate(),r=o.getYear(),l=o.getUTCDay(),d=t[e].type,l=_this.getCalendarStart(l,s),h=t[e].label;r===_this.TODAY.getYear()&&(i.find("td").eq(s+l+6).addClass("bg-"+_this.options.holidays_type[d]),_this.addLabel(i,s,h,a,n),a=t[e].label,n=o)}},addLabel:function(t,e,a,n,o){let i="",s=null;o=o?o.getDate():e;a==n&&e===o+1?(s=t.find(".js-holidays").find("p").last(),i=s.text().replace(/(\d+),*\./,"$1, "+e+"."),this.options.allowHTML?s.html(i):s.text(i)):(i=this.options.allowHTML?jQuery("<p/>").html(e+". "+a):jQuery("<p/>").text(e+". "+a),(s=t.find(".js-holidays")).append(i))},daysLeft:function(){var n=new Date,t=document.querySelector("#js-hoynoes"),e=document.querySelector("#js-hoyes");if(this.options.calendarYear===new Date(Date.now()).getFullYear()||this.options.calendarYear-1===new Date(Date.now()).getFullYear()){var o,i=document.querySelector("#js-ndays"),a=document.querySelector("#js-faltan"),s=document.querySelector("#js-proximo"),r=document.querySelector("#js-detalle"),l=document.querySelector("#js-lector"),d=document.querySelector("#js-detallehoy");for(o in this.options.markers[0]){let t=this.options.markers[0][o],e=t.date.split("/"),a=new Date(e[2],e[1]-1,e[0]);if(n<a&&"no_laborable"!==t.type){i.classList.add("text-"+this.options.holidays_type[t.type]),r.classList.add("text-"+this.options.holidays_type[t.type]);var h=Math.abs(a.getTime()-n.getTime()),u=Math.ceil(h/864e5),c=`${a.getDate()} de ${this.months[a.getMonth()]} de ${a.getFullYear()} `,p=t.label;break}}for(o in a.innerHTML=u,s.innerHTML=c,r.innerHTML=p,l.innerHTML=`Faltan ${u} días para el próximo feriado. `+`El próximo feriado es el ${c}. `+p,this.options.markers[0]){var y=this.options.markers[0][o],m=y.date.split("/"),f=new Date(m[2],m[1]-1,m[0]);if(n.getDate()==f.getDate()&&n.getMonth()==f.getMonth()&&"no_laborable"!==y.type){e.classList.remove("hidden"),e.classList.add("text-"+this.options.holidays_type[y.type]),t.classList.add("hidden"),d.innerHTML=y.label,d.className="text-"+this.options.holidays_type[y.type],l.innerHTML="Hoy es feriado. "+y.label;break}}}else t.classList.add("hidden"),e.classList.add("hidden")}};