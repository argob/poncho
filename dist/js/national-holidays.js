let calendar={convertirFecha(e){e.split("/");var[e,t,a]=e.split("/");return{dateObject:new Date(a,t-1,e),markerDay:e,markerMonth:t,markerYear:a}},ordenarPorFecha(e){return e.sort((e,t)=>this.convertirFecha(e.date).dateObject-this.convertirFecha(t.date).dateObject)},parseDate(e){var t,a;if("string"==typeof e)return[e,t,a]=e.split("/"),{dateObject:new Date(a,t-1,e),markerDay:e,markerMonth:t,markerYear:a,markerDayInt:parseInt(e),markerMonthInt:parseInt(t),markerYearInt:parseInt(a)}},toggleText(e,t){for(var a of document.querySelectorAll(`[data-${e}-${t}]`)){var r=(e+"-"+t).toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase());a.textContent=a.dataset[r]}},tZone(e,t="America/Argentina/Buenos_Aires"){if(e instanceof Date)return new Date(e.toLocaleString("en-US",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));throw new TypeError("Se espera un objeto Date()")},timeZone:"America/Argentina/Buenos_Aires",dictionary:{es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDaysAbbr:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekDays:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],holidaysType:{inamovible:"Feriado inamovible",trasladable:"Feriado trasladable",no_laborable:"Día no laborable",turistico:"Feriado turístico"}},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekDaysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],holidaysType:{inamovible:"Fixed Holiday",trasladable:"Movable Holiday",no_laborable:"Non-Working Day",turistico:"Tourist Holiday"}}},daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],TODAY:null,container:null,template:null,options:{},render:function(e){document.querySelectorAll(e.containerId).forEach(e=>e.innerHTML=""),this.TODAY=this.tZone(new Date(e.calendarYear,0,1,12,0,0),this.timeZone),e.marker,this.options=e,this.ln=e.hasOwnProperty("lang")?e.lang:"es";var t=Object.keys(e.markers).some(e=>Object.keys(this.dictionary).includes(e));this.markers=t?e.markers[this.ln]:e.markers[0],this.container=document.querySelector(this.options.containerId),this.template=document.getElementById("monthtpl"),this.daysLeft(),this.renderCalendar()},eventsByMonth(r,n){if(!isNaN(Number(r))&&!isNaN(Number(n))&&!(r<0||12<r)){let a=this;var e=this.markers.filter(e=>{var{markerMonth:e,markerYear:t}=a.parseDate(e.date);return e==r&&t==n});return this.ordenarPorFecha(e)}},renderCalendar:function(){for(var e in[...Array(12).keys()]){var t=this.tZone(new Date(this.options.calendarYear,e,1,12,0,0),this.timeZone),a=this.template.content.cloneNode(!0),t=this.drawCalendarMonth(t,e,a);this.container.appendChild(t)}},createWeekDays(){var e,t=document.createElement("tr");for(e of this.dictionary[this.ln].weekDaysAbbr){var a=document.createElement("th");a.textContent=e,t.appendChild(a)}return t},drawCalendarMonth:function(e,t,a){var r=e.getDay(),n=e.getDate(),e=e.getFullYear();const i=this.daysOfMonth[t];var s=this.dictionary[this.ln].months[t];a.querySelector(".js-tpl-id").id="m"+s,a.querySelector(".js-tpl-month").textContent=s;a.querySelector(".js-tpl-weekdays").appendChild(this.createWeekDays());var s=a.querySelector(".js-tpl-holidays"),o=this.addLabel(t,e),s=(o&&s.appendChild(o),1===t&&(e%100!=0&&e%4==0||e%400==0)&&(i=29),this.eventsByMonth(parseInt(t)+1,e)),o=this.getCalendarStart(r,n);return this.renderMonth(a,o,i,s),a},renderMonth:function(e,t,a,r){var n=Array(42).fill(!1);let i=1;for(let e=t;e<t+a&&e<42;e++)n[e]=i,i++;var s=[];for(let e=0;e<n.length;e+=7)s.push(n.slice(e,e+7));var o,l=e.querySelector(".js-tpl-tbody");for(o of s){var d=this.drawCalendarRow(o,r);l.appendChild(d)}},drawCalendarRow:function(e,t){var a=t.map(e=>{var t;if(e)return t=e.type,e=this.parseDate(e.date).markerDayInt,[e,t]}),r=document.createElement("tr");for(let t of e){var n,i,s=document.createElement("td");t?((n=a.find(e=>e[0]===t))?((i=document.createElement("mark")).innerHTML=t,i.classList.add("bg-transparent"),s.classList.add("bg-"+this.options.holidays_type[n[1]]),s.appendChild(i)):s.innerHTML=t,r.appendChild(s)):(s.innerHTML="&nbsp;",s.setAttribute("aria-hidden","true"),r.appendChild(s))}return r},getCalendarStart:function(e,t){if(!(!Number.isInteger(e)||e<0||6<e)&&(Number.isInteger(t)&&!(t<=0)))return(e-(t-1)%7+7)%7},addLabel:function(e,t){if(!isNaN(Number(e))){e=this.eventsByMonth(parseInt(e)+1,t);if(!e)return[];var a,r=e.reduce((e,t)=>(e[t.label]?e[t.label].push(t):e[t.label]=[t],e),{}),n=document.createElement("ul");n.classList.add("holidays","list-unstyled");for(a of Object.keys(r)){var i=r[a],s=i.map(e=>this.parseDate(e.date).markerDayInt),{label:i,type:o}=i[0],o=this.dictionary[this.ln].holidaysType[o],s=s.join(", ")+". "+`<span class="sr-only">${o} — </span>${i}.`,o=document.createElement("li");o.innerHTML=s,n.appendChild(o)}return n}},daysLeft:function(){var e=this.tZone(new Date,this.timeZone),t=document.querySelector("#js-hoynoes"),a=document.querySelector("#js-hoyes"),{calendarYear:r,holidays_type:n}=this.options,i=this.markers,s=e.getFullYear();let o=0,l=detalle="";if(r===s||r-1===s){var d,h=document.querySelector("#js-ndays"),r=document.querySelector("#js-faltan"),s=document.querySelector("#js-proximo"),c=document.querySelector("#js-detalle"),u=document.querySelector("#js-detallehoy");for(d in i){var{date:m,type:y,label:p}=i[d],{markerDay:m,markerMonth:b,markerYear:g}=this.parseDate(m),g=this.tZone(new Date(g,b-1,m),this.timeZone);if(e<g&&"no_laborable"!==y){h.classList.add("text-"+n[y]),c.classList.add("text-"+n[y]);b=Math.abs(g.getTime()-e.getTime()),m=(o=Math.ceil(b/864e5),g.getDate()),y=this.dictionary[this.ln].months[g.getMonth()];l={es:`${m} de ${y.toLocaleLowerCase()} `+"de "+g.getFullYear(),en:y+` ${m}th, `+g.getFullYear()},detalle=p;break}}for(d in 1==o?this.toggleText("text-singular",this.ln):this.toggleText("text-plural",this.ln),this.toggleText("text",this.ln),r.innerHTML=o,s.innerHTML=l[this.ln],c.innerHTML=detalle,i){var{date:f,type:D,label:k}=i[d],{markerDay:f,markerMonth:v,markerYear:M}=this.parseDate(f),M=this.tZone(new Date(M,v-1,f),this.timeZone);if(e.getDate()==M.getDate()&&e.getMonth()==M.getMonth()&&"no_laborable"!==D){a.classList.remove("hidden"),a.removeAttribute("aria-hidden"),a.classList.add("text-"+n[D]),t.classList.add("hidden"),t.setAttribute("aria-hidden","true"),u.innerHTML=k,u.className="text-"+n[D];break}}}else t.classList.add("hidden"),a.classList.add("hidden")}};