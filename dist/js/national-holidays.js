let calendar={dictionary:{es:{falta:{plural:"Faltan",singular:"Falta"},dia:{plural:"Días",singular:"día"}}},TODAY:null,months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDayName:["Dom","Lun","Mar","Mie","Jue","Vie"],daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],container:null,template:null,options:{},render:function(t){_this=this,document.querySelectorAll(t.containerId+", .js-holidays").forEach(t=>t.innerHTML=""),this.TODAY=new Date(Date.UTC(t.calendarYear,0,1,3,0,0)),this.options=t,this.daysOfMonth=t.daysOfMonth||this.daysOfMonth,this.container=jQuery(this.options.containerId),this.template=jQuery(this.options.templateId),this.iteration_date=new Date(Date.UTC(this.TODAY.getFullYear(),this.TODAY.getMonth(),1,3,0,0)),this.renderCalendar(),this.options.markers.forEach(function(t){_this.markDates(t)}),this.daysLeft(),document.querySelectorAll(".js-holidays").forEach(t=>t.hasChildNodes()?null:t.remove())},renderCalendar:function(){_this=this;var a=new Date(Date.UTC(_this.TODAY.getFullYear(),_this.TODAY.getMonth(),1,3,0,0));this.template.hide(),this.months.forEach(function(t,e){monthId="m"+t,iMonth=_this.getTplClone(_this.template,monthId),_this.container.append(iMonth),a.setUTCMonth(e),_this.drawCalendarMonth(a,iMonth.attr("id"))})},drawCalendarMonth:function(t,e){var a=t.getUTCMonth(),n=t.getUTCDay(),i=t.getUTCFullYear(),s=t.getUTCDate(),o=this.daysOfMonth[a],r=(jQuery("#"+e).find("h2").first().text(this.months[a]),0);t.getUTCMonth()===a&&t.getUTCFullYear()===i&&(r=s),1===a&&(i%100!=0&&i%4==0||i%400==0)&&(o=29),this.renderMonth(e,this.getCalendarStart(n,s),o,r)},renderMonth:function(t,e,a,n){for(var i,s=1,o=e,r=jQuery("#"+t),l=this.drawCalendarRow(r),d=1;d<=a;d++)(i=l.find("td").eq(o)).text(d),d===n&&i.addClass("today"),0===(o=++o%7)&&d+1<=a&&(l=this.drawCalendarRow(r),s++);for(;s<6;)l=this.drawCalendarRow(r),s++},drawCalendarRow:function(t){for(var t=t.find("table").first(),e=jQuery("<tr/>"),a=0;a<7;a++)e.append(jQuery("<td/>").html("&nbsp;"));return t.append(e),e},getCalendarStart:function(t,e){e=(e-1)%7-t;return 0<e&&(e-=7),Math.abs(e)},getTplClone:function(t,e){return t.clone().attr("id",e).show()},markDates:function(t){_this=this;var e,a="",n=null;for(e in t){var i=t[e].date.split("/"),i=new Date(Date.UTC(i[2],i[1]-1,i[0],3,0,0)),s=_this.months[i.getMonth()],s=jQuery("#m"+s),o=i.getDate(),r=i.getYear(),l=i.getUTCDay(),d=t[e].type,l=_this.getCalendarStart(l,o),h=t[e].label;r===_this.TODAY.getYear()&&(s.find("td").eq(o+l+6).addClass("bg-"+_this.options.holidays_type[d]),_this.addLabel(s,o,h,a,n),a=t[e].label,n=i)}},addLabel:function(t,e,a,n,i){let s="",o=null;i=i?i.getDate():e;a==n&&e===i+1?(o=t.find(".js-holidays").find("p").last(),s=o.text().replace(/(\d+),*\./,"$1, "+e+"."),this.options.allowHTML?o.html(s):o.text(s)):(s=this.options.allowHTML?jQuery("<p/>").html(e+". "+a):jQuery("<p/>").text(e+". "+a),(o=t.find(".js-holidays")).append(s))},daysLeft:function(){var n=new Date,t=document.querySelector("#js-hoynoes"),e=document.querySelector("#js-hoyes");if(this.options.calendarYear===new Date(Date.now()).getFullYear()||this.options.calendarYear-1===new Date(Date.now()).getFullYear()){var i=document.querySelector("#js-ndays"),a=document.querySelector("#js-faltan"),s=document.querySelector("#js-proximo"),o=document.querySelector("#js-detalle"),r=document.querySelector("#js-detallehoy"),l=document.querySelector(".js-dia"),d=document.querySelector(".js-falta");for(y in this.options.markers[0]){let t=this.options.markers[0][y],e=t.date.split("/"),a=new Date(e[2],e[1]-1,e[0]);if(n<a&&"no_laborable"!==t.type){i.classList.add("text-"+this.options.holidays_type[t.type]),o.classList.add("text-"+this.options.holidays_type[t.type]);var h=Math.abs(a.getTime()-n.getTime()),u=Math.ceil(h/864e5),c=`${a.getDate()} de ${this.months[a.getMonth()].toLocaleLowerCase()} de `+a.getFullYear(),p=t.label;break}}var y,f=this.dictionary.es,m=1==u;for(y in l.textContent=m?f.dia.singular:f.dia.plural,d.textContent=m?f.falta.singular:f.falta.plural,a.innerHTML=u,s.innerHTML=c,o.innerHTML=p,this.options.markers[0]){var g=this.options.markers[0][y],D=g.date.split("/"),M=new Date(D[2],D[1]-1,D[0]);if(n.getDate()==M.getDate()&&n.getMonth()==M.getMonth()&&"no_laborable"!==g.type){e.classList.remove("hidden"),e.classList.add("text-"+this.options.holidays_type[g.type]),t.classList.add("hidden"),r.innerHTML=g.label,r.className="text-"+this.options.holidays_type[g.type];break}}}else t.classList.add("hidden"),e.classList.add("hidden")}};