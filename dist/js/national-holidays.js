let calendar={toggleText(e,t){for(var a of document.querySelectorAll(`[data-${e}-${t}]`)){var n=(e+"-"+t).toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase());a.textContent=a.dataset[n]}},tZone(e,t="America/Argentina/Buenos_Aires"){if(e instanceof Date)return new Date(e.toLocaleString("en-US",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));throw new TypeError("Se espera un objeto Date()")},timeZone:"America/Argentina/Buenos_Aires",dictionary:{es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDaysAbbr:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekDaysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],TODAY:null,container:null,template:null,options:{},render:function(e){document.querySelectorAll(e.containerId+", .js-holidays").forEach(e=>e.innerHTML=""),this.TODAY=this.tZone(new Date(e.calendarYear,0,1,3,0,0),this.timeZone),this.options=e,this.ln="es",this.daysOfMonth=e.daysOfMonth||this.daysOfMonth,this.container=jQuery(this.options.containerId),this.template=jQuery(this.options.templateId),this.iteration_date=this.TODAY,this.renderCalendar();for(var t of this.options.markers)this.markDates(t);this.daysLeft(),document.querySelectorAll(".js-holidays").forEach(e=>e.hasChildNodes()?null:e.remove())},renderCalendar:function(){var e,t=this.TODAY;for(e in this.template.hide(),this.dictionary[this.ln].months){var a="m"+this.dictionary[this.ln].months[e],a=this.getTplClone(this.template,a);this.container.append(a),t.setUTCMonth(e),this.drawCalendarMonth(t,a.attr("id"))}},drawCalendarMonth:function(e,t){var a=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCFullYear(),r=e.getUTCDate(),o=this.daysOfMonth[a],s=(jQuery("#"+t).find("h2").first().text(this.dictionary[this.ln].months[a]),0);e.getUTCMonth()===a&&e.getUTCFullYear()===i&&(s=r),1===a&&(i%100!=0&&i%4==0||i%400==0)&&(o=29),this.renderMonth(t,this.getCalendarStart(n,r),o,s)},renderMonth:function(e,t,a,n){let i=1,r=t,o=jQuery("#"+e);var s,l=this.drawCalendarRow(o);let d=1;for(;d<=a;d++)(s=l.find("td").eq(r)).text(d),d===n&&s.addClass("today"),0===(r=++r%7)&&d+1<=a&&(l=this.drawCalendarRow(o),i++);for(;i<6;)l=this.drawCalendarRow(o),i++},drawCalendarRow:function(e){for(var e=e.find("table").first(),t=jQuery("<tr/>"),a=0;a<7;a++)t.append(jQuery("<td/>").html("&nbsp;"));return e.append(t),t},getCalendarStart:function(e,t){t=(t-1)%7-e;return 0<t&&(t-=7),Math.abs(t)},getTplClone:function(e,t){return e.clone().attr("id",t).show()},markDates:function(e){var t,a="",n=null;for(t in e){var{date:i,type:r,label:o}=e[t],[i,s,l]=i.split("/"),l=this.tZone(new Date(l,s-1,i,3,0,0),this.timeZone),s=this.dictionary[this.ln].months[l.getUTCMonth()],i=jQuery("#m"+s),s=l.getDate(),d=l.getUTCFullYear(),h=l.getUTCDay(),h=this.getCalendarStart(h,s),u=o;d===this.TODAY.getUTCFullYear()&&(i.find("td").eq(s+h+6).addClass("bg-"+this.options.holidays_type[r]),this.addLabel(i,s,u,a,n),a=o,n=l)}},addLabel:function(e,t,a,n,i){let r="",o=null;i=i?i.getDate():t;a==n&&t===i+1?(o=e.find(".js-holidays").find("p").last(),r=o.text().replace(/(\d+),*\./,"$1, "+t+"."),this.options.allowHTML?o.html(r):o.text(r)):(r=this.options.allowHTML?jQuery("<p/>").html(t+". "+a):jQuery("<p/>").text(t+". "+a),(o=e.find(".js-holidays")).append(r))},daysLeft:function(){var e=this.tZone(new Date,this.timeZone),t=document.querySelector("#js-hoynoes"),a=document.querySelector("#js-hoyes"),{calendarYear:n,markers:i,holidays_type:r}=this.options,o=e.getFullYear();let s=0,l=detalle="";if(n===o||n-1===o){var d,h=document.querySelector("#js-ndays"),n=document.querySelector("#js-faltan"),o=document.querySelector("#js-proximo"),u=document.querySelector("#js-detalle"),c=document.querySelector("#js-detallehoy");for(d in i[0]){var{date:y,type:m,label:g}=i[0][d],[y,p,f]=y.split("/"),f=this.tZone(new Date(f,p-1,y),this.timeZone);if(e<f&&"no_laborable"!==m){h.classList.add("text-"+r[m]),u.classList.add("text-"+r[m]);p=Math.abs(f.getTime()-e.getTime()),y=(s=Math.ceil(p/864e5),f.getDate()),m=this.dictionary[this.ln].months[f.getMonth()];l={es:`${y} de ${m.toLocaleLowerCase()} `+"de "+f.getFullYear(),en:m+` ${y}th, `+f.getFullYear()},detalle=g;break}}for(d in 1==s?this.toggleText("text-singular",this.ln):this.toggleText("text-plural",this.ln),this.toggleText("text",this.ln),n.innerHTML=s,o.innerHTML=l[this.ln],u.innerHTML=detalle,i[0]){var{date:b,type:T,label:M}=i[0][d],[b,C,D]=b.split("/"),D=this.tZone(new Date(D,C-1,b),this.timeZone);if(e.getDate()==D.getDate()&&e.getMonth()==D.getMonth()&&"no_laborable"!==T){a.classList.remove("hidden"),a.removeAttribute("aria-hidden"),a.classList.add("text-"+r[T]),t.classList.add("hidden"),t.setAttribute("aria-hidden","true"),c.innerHTML=M,c.className="text-"+r[T];break}}}else t.classList.add("hidden"),a.classList.add("hidden")}};