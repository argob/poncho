const calendar={TODAY:null,months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDayName:["Dom","Lun","Mar","Mie","Jue","Vie"],daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],container:null,template:null,options:{},render:function(t){_this=this,document.querySelectorAll(t.containerId+", .js-holidays").forEach(t=>t.innerHTML=""),this.TODAY=new Date(Date.UTC(t.calendarYear,0,1,3,0,0)),this.options=t,this.daysOfMonth=t.daysOfMonth||this.daysOfMonth,this.container=jQuery(this.options.containerId),this.template=jQuery(this.options.templateId),this.iteration_date=new Date(Date.UTC(this.TODAY.getFullYear(),this.TODAY.getMonth(),1,3,0,0)),this.renderCalendar(),this.options.markers.forEach(function(t){_this.markDates(t)}),this.daysLeft(),document.querySelectorAll(".js-holidays").forEach(t=>t.hasChildNodes()?null:t.remove())},renderCalendar:function(){_this=this;var a=new Date(Date.UTC(_this.TODAY.getFullYear(),_this.TODAY.getMonth(),1,3,0,0));this.template.hide(),this.months.forEach(function(t,e){monthId="m"+t,iMonth=_this.getTplClone(_this.template,monthId),_this.container.append(iMonth),a.setUTCMonth(e),_this.drawCalendarMonth(a,iMonth.attr("id"))})},drawCalendarMonth:function(t,e){var a=t.getUTCMonth(),n=t.getUTCDay(),o=t.getUTCFullYear(),s=t.getUTCDate(),i=this.daysOfMonth[a],r=(jQuery("#"+e).find("h2").first().text(this.months[a]),0);t.getUTCMonth()===a&&t.getUTCFullYear()===o&&(r=s),1===a&&(o%100!=0&&o%4==0||o%400==0)&&(i=29),this.renderMonth(e,this.getCalendarStart(n,s),i,r)},renderMonth:function(t,e,a,n){for(var o,s=1,i=e,r=jQuery("#"+t),l=this.drawCalendarRow(r),d=1;d<=a;d++)(o=l.find("td").eq(i)).text(d),d===n&&o.addClass("today"),0===(i=++i%7)&&d+1<=a&&(l=this.drawCalendarRow(r),s++);for(;s<6;)l=this.drawCalendarRow(r),s++},drawCalendarRow:function(t){for(var t=t.find("table").first(),e=jQuery("<tr/>"),a=0;a<7;a++)e.append(jQuery("<td/>").html("&nbsp;"));return t.append(e),e},getCalendarStart:function(t,e){e=(e-1)%7-t;return 0<e&&(e-=7),Math.abs(e)},getTplClone:function(t,e){return t.clone().attr("id",e).show()},markDates:function(t){_this=this;var e,a="",n=null;for(e in t){var o=t[e].date.split("/"),o=new Date(Date.UTC(o[2],o[1]-1,o[0],3,0,0)),s=_this.months[o.getMonth()],s=jQuery("#m"+s),i=o.getDate(),r=o.getYear(),l=o.getUTCDay(),d=t[e].type,l=_this.getCalendarStart(l,i),h=t[e].label;r===_this.TODAY.getYear()&&(s.find("td").eq(i+l+6).addClass("bg-"+_this.options.holidays_type[d]),_this.addLabel(s,i,h,a,n),a=t[e].label,n=o)}},addLabel:function(t,e,a,n,o){let s="",i=null;o=o?o.getDate():e;a==n&&e===o+1?(i=t.find(".js-holidays").find("p").last(),s=i.text().replace(/(\d+),*\./,"$1, "+e+"."),this.options.allowHTML?i.html(s):i.text(s)):(s=this.options.allowHTML?jQuery("<p/>").html(e+". "+a):jQuery("<p/>").text(e+". "+a),(i=t.find(".js-holidays")).append(s))},daysLeft:function(){var t=new Date,e=document.querySelector("#js-hoynoes"),a=document.querySelector("#js-hoyes");if(this.options.calendarYear===new Date(Date.now()).getFullYear()||this.options.calendarYear-1===new Date(Date.now()).getFullYear()){var n,o=document.querySelector("#js-ndays"),s=document.querySelector("#js-faltan"),i=document.querySelector("#js-proximo"),r=document.querySelector("#js-detalle"),l=document.querySelector("#js-lector"),d=document.querySelector("#js-detallehoy");for(n in this.options.markers[0]){const y=this.options.markers[0][n],m=y.date.split("/"),f=new Date(m[2],m[1]-1,m[0]);if(t<f&&"no_laborable"!==y.type){o.classList.add("text-"+this.options.holidays_type[y.type]),r.classList.add("text-"+this.options.holidays_type[y.type]);var h=Math.abs(f.getTime()-t.getTime()),u=Math.ceil(h/864e5),c=`${f.getDate()} de ${this.months[f.getMonth()]} de ${f.getFullYear()} `,p=y.label;break}}for(n in s.innerHTML=u,i.innerHTML=c,r.innerHTML=p,l.innerHTML=`Faltan ${u} días para el próximo feriado. `+`El próximo feriado es el ${c}. `+p,this.options.markers[0]){var y=this.options.markers[0][n],m=y.date.split("/"),f=new Date(m[2],m[1]-1,m[0]);if(t.getDate()==f.getDate()&&t.getMonth()==f.getMonth()&&"no_laborable"!==y.type){a.classList.remove("hidden"),a.classList.add("text-"+this.options.holidays_type[y.type]),e.classList.add("hidden"),d.innerHTML=y.label,d.className="text-"+this.options.holidays_type[y.type],l.innerHTML="Hoy es feriado. "+y.label;break}}}else e.classList.add("hidden"),a.classList.add("hidden")}};