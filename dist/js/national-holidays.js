let calendar={dictionary:{es:{falta:{plural:"Faltan",singular:"Falta"},dia:{plural:"Días",singular:"día"}}},TODAY:null,months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekDayName:["Dom","Lun","Mar","Mie","Jue","Vie"],daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],container:null,template:null,options:{},render:function(t){_this=this,document.querySelectorAll(t.containerId+", .js-holidays").forEach(t=>t.innerHTML=""),this.TODAY=new Date(Date.UTC(t.calendarYear,0,1,3,0,0)),this.options=t,this.daysOfMonth=t.daysOfMonth||this.daysOfMonth,this.container=jQuery(this.options.containerId),this.template=jQuery(this.options.templateId),this.iteration_date=new Date(Date.UTC(this.TODAY.getFullYear(),this.TODAY.getMonth(),1,3,0,0)),this.renderCalendar(),this.options.markers.forEach(function(t){_this.markDates(t)}),this.daysLeft(),document.querySelectorAll(".js-holidays").forEach(t=>t.hasChildNodes()?null:t.remove())},renderCalendar:function(){_this=this;var a=new Date(Date.UTC(_this.TODAY.getFullYear(),_this.TODAY.getMonth(),1,3,0,0));this.template.hide(),this.months.forEach(function(t,e){monthId="m"+t,iMonth=_this.getTplClone(_this.template,monthId),_this.container.append(iMonth),a.setUTCMonth(e),_this.drawCalendarMonth(a,iMonth.attr("id"))})},drawCalendarMonth:function(t,e){var a=t.getUTCMonth(),n=t.getUTCDay(),o=t.getUTCFullYear(),i=t.getUTCDate(),r=this.daysOfMonth[a],s=(jQuery("#"+e).find("h2").first().text(this.months[a]),0);t.getUTCMonth()===a&&t.getUTCFullYear()===o&&(s=i),1===a&&(o%100!=0&&o%4==0||o%400==0)&&(r=29),this.renderMonth(e,this.getCalendarStart(n,i),r,s)},renderMonth:function(t,e,a,n){for(var o,i=1,r=e,s=jQuery("#"+t),l=this.drawCalendarRow(s),d=1;d<=a;d++)(o=l.find("td").eq(r)).text(d),d===n&&o.addClass("today"),0===(r=++r%7)&&d+1<=a&&(l=this.drawCalendarRow(s),i++);for(;i<6;)l=this.drawCalendarRow(s),i++},drawCalendarRow:function(t){for(var t=t.find("table").first(),e=jQuery("<tr/>"),a=0;a<7;a++)e.append(jQuery("<td/>").html("&nbsp;"));return t.append(e),e},getCalendarStart:function(t,e){e=(e-1)%7-t;return 0<e&&(e-=7),Math.abs(e)},getTplClone:function(t,e){return t.clone().attr("id",e).show()},markDates:function(t){_this=this;var e,a="",n=null;for(e in t){var o=t[e].date.split("/"),o=new Date(Date.UTC(o[2],o[1]-1,o[0],3,0,0)),i=_this.months[o.getMonth()],i=jQuery("#m"+i),r=o.getDate(),s=o.getYear(),l=o.getUTCDay(),d=t[e].type,l=_this.getCalendarStart(l,r),h=t[e].label;s===_this.TODAY.getYear()&&(i.find("td").eq(r+l+6).addClass("bg-"+_this.options.holidays_type[d]),_this.addLabel(i,r,h,a,n),a=t[e].label,n=o)}},addLabel:function(t,e,a,n,o){let i="",r=null;o=o?o.getDate():e;a==n&&e===o+1?(r=t.find(".js-holidays").find("p").last(),i=r.text().replace(/(\d+),*\./,"$1, "+e+"."),this.options.allowHTML?r.html(i):r.text(i)):(i=this.options.allowHTML?jQuery("<p/>").html(e+". "+a):jQuery("<p/>").text(e+". "+a),(r=t.find(".js-holidays")).append(i))},daysLeft:function(){var n=new Date,t=document.querySelector("#js-hoynoes"),e=document.querySelector("#js-hoyes");if(this.options.calendarYear===new Date(Date.now()).getFullYear()||this.options.calendarYear-1===new Date(Date.now()).getFullYear()){var o=document.querySelector("#js-ndays"),a=document.querySelector("#js-faltan"),i=document.querySelector("#js-proximo"),r=document.querySelector("#js-detalle"),s=document.querySelector("#js-lector"),l=document.querySelector("#js-detallehoy"),d=document.querySelector(".js-dia"),h=document.querySelector(".js-falta");for(f in this.options.markers[0]){let t=this.options.markers[0][f],e=t.date.split("/"),a=new Date(e[2],e[1]-1,e[0]);if(n<a&&"no_laborable"!==t.type){o.classList.add("text-"+this.options.holidays_type[t.type]),r.classList.add("text-"+this.options.holidays_type[t.type]);var u=Math.abs(a.getTime()-n.getTime()),c=Math.ceil(u/864e5),p=`${a.getDate()} de ${this.months[a.getMonth()].toLocaleLowerCase()} de ${a.getFullYear()} `,y=t.label;break}}var f,m=this.dictionary.es,g=1==c;for(f in d.textContent=(g?m.dia.singular:m.dia.plural).toUpperCase(),h.textContent=g?m.falta.singular:m.falta.plural,a.innerHTML=c,i.innerHTML=p,r.innerHTML=y,s.innerHTML=`Faltan ${c} días para el próximo feriado. `+`El próximo feriado es el ${p}. `+y,this.options.markers[0]){var M=this.options.markers[0][f],D=M.date.split("/"),C=new Date(D[2],D[1]-1,D[0]);if(n.getDate()==C.getDate()&&n.getMonth()==C.getMonth()&&"no_laborable"!==M.type){e.classList.remove("hidden"),e.classList.add("text-"+this.options.holidays_type[M.type]),t.classList.add("hidden"),l.innerHTML=M.label,l.className="text-"+this.options.holidays_type[M.type],s.innerHTML="Hoy es feriado. "+M.label;break}}}else t.classList.add("hidden"),e.classList.add("hidden")}};